jQuery(document).ready(function(Q){var ab,s,E,W,aa,k,ac,P,w;var g=false;var S=(/iphone|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()));var z=(/ipad/i.test(navigator.userAgent.toLowerCase()));var L=Q("#header").height();var n=0;if(!Q.support.transition){Q.fn.transition=Q.fn.animate}try{console}catch(ai){console={};console.log=function(){}}var h=Q("#header .logo").children("a").attr("href");var R=h.substring(h.lastIndexOf("/")+1);w=A(R);function A(a){return a.split(".").pop()}ab=window.location.hash.substr(1);P=document.title;if(ab==""){Z()}var B=Q(".nav-bar li a").each(function(e){var a=Q(this).attr("href");var am=location.pathname.substr(location.pathname.lastIndexOf("/")+1,location.pathname.length);var an=am.substr(0,am.length-(w.length+1));var al=ab+"."+w+" #content .target";if(ab==a.substr(0,a.length-(w.length+1))){af();if(ab!=""&&ab!=an){Q("#content .new").load(al,"",J)}}else{if(e==Q(".nav-bar li").length-1){D()}}});function D(){var e=location.pathname.substr(location.pathname.lastIndexOf("/")+1,location.pathname.length);var al=e.substr(0,e.length-(w.length+1));var a=ab+"."+w+" #content .target";af();if(ab!=""&&ab!="#"&&ab!=al){Q("#content .new").load(a,"",J)}}Q(window).bind("hashchange",function(al){ab=window.location.hash;var a=ab+"."+w+" #content .target";af();if(ab!=""&&ab!="#"){Q("#content .new").load(a.substr(1),"",J)}else{window.location.hash="#index"}});if(Q(window).width()<767){Q(window).scroll(function(am){var a=Q(window).height();var al=Q(window).scrollTop();if(al>a){Q("#bg").css({display:"none",opacity:0})}else{if(Q("#bg").css("opacity")==0){Q("#bg").css({display:"block",opacity:0}).transition({opacity:1})}}})}function F(){var e;ab.indexOf("#")?e=0:e=1;var al=ab.substr(e);al=al.toLowerCase().replace(/\b[a-z]/g,function(am){return am.toUpperCase()});var a=Q("h1.headline span").text();if(a==""){a=al}if(ab!="index"&&ab!=""&&ab!="#index"){document.title=P+" | "+a}else{document.title=P}}Q('.nav-bar li a:not([target]):not([href^="#"]):not(.selected), .logo a').click(function(ap){var ao=false;if(Modernizr.touch&&Q(this).hasClass("selected")){ao=true;ap.preventDefault();Q(this).trigger("mouseenter");if(Q(this).hasClass("touched")){Q(this).removeClass("touched");ao=false}else{Q(this).addClass("touched")}}if(ao==false){E=true;g=false;Q(".nav-bar li a, .logo a").each(function(){if(Q(this).hasClass("selected")){Q(this).removeClass("selected")}if(Q(this).hasClass("touched")){Q(this).removeClass("touched")}});if(Q(this).hasClass("main")){Q(this).addClass("selected")}else{Q(this).parent().parent().parent().parent().children(".main").addClass("selected")}var al=Q(this).attr("href")+" #content .target ";var a=Q(this).attr("href");var an=window.location.hash.substr(1);var am=location.pathname.substr(location.pathname.lastIndexOf("/")+1,location.pathname.length);if(Q(".nav-bar li a")){if(a.substr(0,a.length-(w.length+1))!=an){if(an==""&&am==a){}else{af();aq()}}}if(Q.browser.msie&&parseInt(Q.browser.version,10)<8){window.location="#"+(Q(this).attr("href").substr(0,Q(this).attr("href").length-(w.length+1))).replace(/^.*[\\\/]/,"")}else{window.location.hash=Q(this).attr("href").substr(0,Q(this).attr("href").length-(w.length+1))}}function aq(){if(!"onhashchange" in window||Q.browser.msie){if(Q.browser.msie){if(parseInt(Q.browser.version,10)<8&&a!="#"){Q("#content .new ").load(al,"",J)}}else{Q("#content .new ").load(al,"",J)}}var e=Q("#header .bar").parent().width()+"px";Q("#header .bar").css({opacity:0.5,width:0}).stop().animate({width:e},"500")}return false});function af(){Q("#content .old").empty();var a=Q(window).height()-Q("#header").height();Q("#content .wrapper").children(".old").css({height:a});if(window.location.hash.substr(1)!=""){Q("#content .new").contents().clone().appendTo("#content .old");if(S&&!z){Q("#content .new").empty()}}else{Q("#content .new").contents().clone().appendTo("#content .old")}}function J(){ad();m();Q("#content").delay(1000,a());function a(){O();Q("#header .bar").transition({opacity:"0"},"slow");function e(){Q.browser.msie?Q(".bg-gallery").stop().animate({opacity:1},"slow"):Q("#bg").css({opacity:1})}Q("#content .wrapper").children(".old").transition({height:0},"1000",function(){Q("#content .wrapper").children(".old").empty().css({height:0});if(!Q(".new .target .portfolio").length&&!Q(".new .contact").length){e()}Z();if(Q(window).width()<767&&Q("#main").attr("data-mobileautofocus")!="false"){Q("html,body").animate({scrollTop:Q("#content .new").offset().top},"slow")}})}}function ad(){if(s!=null){s.destroy();s=null}if(Q("#content .map").length){Q("#content .map").remove()}if(Q(".old .target .project").length){Q(".old .target .project").css({height:0})}}function y(){if(Q.browser.msie&&parseInt(Q.browser.version,10)<9){Q("#shell").css({overflow:"auto","overflow-x":"hidden","overflow-y":"auto"})}else{if(Q(window).width()>767){if(Q("#main").attr("data-globalscroll")!="true"){if(Modernizr.touch){Q("#shell").attr("data-iscroll","true")}if(s!=null){s.destroy();s=null}if(!S&&Q("#shell").length&&Q("#shell").attr("data-iscroll")!="false"){s=new iScroll("shell",{zoom:false,checkDOMChanges:false,scrollbarClass:"myScrollbar",onBeforeScrollStart:function(al){var a=al.target;while(a.nodeType!=1){a=a.parentNode}if(a.tagName!="SELECT"&&a.tagName!="INPUT"&&a.tagName!="TEXTAREA"){al.preventDefault()}}});if(s!=null&&s!=undefined){s.refresh()}}else{Q("#shell").jScrollPane()}}else{Q("html, body").css({overflow:"visible"});Q("body, #content, #scroller").css({overflow:"visible"});Q("#content .wrapper, #shell").css({height:"auto"});Q("#footer").css({position:"fixed"});Q("#content").css({"border-bottom":"none"})}}}}function r(){Q(".latest li a").each(function(){var a=Q(this);Q(a).hover(function(){if(Q(window).width()>767){Q(a).children("img").transition({opacity:0.1},500);Q(a).children(".overlay").transition({opacity:1},500)}else{}},function(){if(Q(window).width()>767){Q(a).children("img").transition({opacity:1},"fast");Q(a).children(".overlay").transition({opacity:0},"fast")}else{}})})}function ak(){var a=Q(".tweets").attr("data-user");var e=Q(".tweets").attr("data-number");Q(".tweets").tweet({username:a,page:1,count:e,loading_text:"Loading tweets..."}).bind("loaded",function(){Q(this).find("a").attr("target","_blank");var al=Q(this).find(".tweet_list");al.children("li").each(function(){Q(this).children("span").wrapAll("<div/>")});var am=function(){setTimeout(function(){var an="-100px";if(Q(window).width()<767){an="-130px"}al.find("li:first").transition({marginTop:an},500,function(){Q(this).detach().appendTo(al).removeAttr("style")});am()},5000)};am()})}function x(){Q("#content .blog .thumbnail").each(function(e){var a=Q(this);var al=Q(this).find("img");al.load(al.attr("src"),function(){al.transition({opacity:1},500);if(s!=null&&s!=undefined){s.refresh()}});al.parent().hover(function(){Q(this).css({background:"#000"});Q(this).children("img").stop().transition({opacity:0.5},500);Q(this).children("span").addClass("active")},function(){Q(this).children("img").stop().transition({opacity:1});if(Q(this).children("span").hasClass("active")){Q(this).children("span").removeClass("active")}})});Q("#content .commentForm").click(function(){setTimeout(m,20)})}function T(){if(s==null){y()}Q("#content .new .target .works .item").each(function(am){var al=Q("#content .new .target .works").attr("data-width")+"px";var an=Q(this).children("a").children("img");var e=Q("#content .new .target .works .item").length;an.load(an.attr("src"),function(){an.parent().parent().transition({opacity:1},500);Q("#content .new .target .works").isotope("reLayout");if(s!=null&&s!=undefined){s.refresh()}});an.parent().hover(function(){Q(this).children("img").stop().transition({opacity:0.5},function(){});if(Q.browser.msie){Q(this).children("span").animate({opacity:1})}else{Q(this).children("span").addClass("active")}},function(){Q(this).children("img").stop().transition({opacity:1});if(Q.browser.msie){Q(this).children("span").animate({opacity:0})}else{if(Q(this).children("span").hasClass("active")){Q(this).children("span").removeClass("active")}}});if(am==(e-1)){a()}});function a(){var al=Q("#content .new .target .works");var e=Math.floor(Q("#content .new .target .works").attr("data-width"));al.isotope({itemSelector:".item",layoutMode:"masonry",onLayout:function(){}},function(){Q(".new .target .works").css({opacity:"1"});m();if(s==null){y()}});function am(){Q("#filters dd").each(function(){if(Q(this).hasClass("active")){Q(this).removeClass("active")}})}Q("#filters a").click(function(){var an=Q(this).attr("data-filter");am();Q(this).parent().addClass("active");al.isotope({filter:an},ao());function ao(){var aq=setInterval(ap,100);function ap(){m();if(s!=null&&s!=undefined){s.refresh()}clearInterval(aq)}}return false})}}function c(){if(!g){g=true;Q(".portfolio").unbind();Q(".portfolio").orbit({animation:"horizontal-push",animationSpeed:800,timer:false,advanceSpeed:4000,pauseOnHover:false,startClockOnMouseOut:false,startClockOnMouseOutAfter:1000,directionalNav:true,captions:false,captionAnimation:"fade",captionAnimationSpeed:800,bullets:false,bulletThumbs:false,bulletThumbLocation:"",afterSlideChange:function(){},fluid:true});Q.browser.msie?Q(".bg-gallery").stop().animate({opacity:0},"slow"):Q("#bg").css({opacity:0});Q(".portfolio .orbit-slide").each(function(e){var a=Q(this).children("img");Q("<img />").attr("src",a.attr("src")).load(function(){a.transition({opacity:1},1000);if(e==Q(".portfolio .orbit-slide").length-1){setTimeout(function(){g=false},2000);if(Q(".portfolio .play").length){Q(Q(".portfolio .play")).css({display:"block"})}}})});if(history.length&&Q(".portfolio").attr("data-close")=="true"){Q(".portfolio .orbit-slide").parent().parent().append('<div class="close">Close</div>');Q(".close").click(function(){history.go(-1)})}if(Q(".portfolio").attr("data-heart")=="true"){Q(".portfolio .orbit-slide").parent().parent().append('<div class="heart">'+Q(".portfolio").attr("data-likes")+"</div>");Q(".heart").click(function(){var a=Q(".portfolio").attr("data-likes");a++;Q(".heart").html(a)});if(Q(".portfolio").attr("data-addthis")=="true"){Q(".heart").addClass("addthis_button_compact").attr("href","http://www.addthis.com/bookmark.php").attr("target","_blank");addthis.button(".heart")}}t();m()}}function V(){function a(){Q("#content .contactForm .feedback div").each(function(){Q(this).hide()})}a();Q("#content .contactForm input#submit").click(function(aq){var an=Q(".contactForm #name").val();var am=Q(".contactForm #email").val();var ao=Q(".contactForm #message").val();var ap=Q(".contactForm form").attr("action");if(an==""||am==""||ao==""||an=="Name"||am=="Email"||ao=="Message"||!al(am)){a();Q("#content .contactForm .feedback .warning").show()}else{Q.ajax({type:"POST",url:ap,data:"name="+an+"&email="+am+"&message="+ao,dataType:"html",success:function(e){a();Q("#content .contactForm .feedback .success").show()},error:function(){a();Q("#content .contactForm .feedback .error").show()}})}function al(e){var ar=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return ar.test(e)}})}function H(){setTimeout(o,10);Q.browser.msie?Q(".bg-gallery").stop().animate({opacity:0},"slow"):Q("#bg").css({opacity:0})}function o(){var e=Q("#content .new .contact").attr("data-address");var am=Math.floor(Q("#content .new .contact").attr("data-zoom"));Q("#content .new").prepend('<div class="map" id="gMap"></div>');setTimeout(al,10);function al(){Q("#gMap").gMap({address:e,zoom:am,mapTypeControl:true,latitude:"fit",longitude:"fit",zoomControl:true,panControl:true,scaleControl:false,streetViewControl:false,controlsStyle:[{mapType:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,zoom:google.maps.ZoomControlStyle.SMALL}],markers:[{address:e}],onComplete:U})}}function U(){if(Q("#content .new .contact").length){m();function e(){m()}var a=setInterval(e,200);setTimeout(function(){clearInterval(a);b()},2000)}}Q(".nav-bar").hover(function(){Q.browser.msie?Q(".gradient").stop().animate({opacity:1}):Q(".gradient").css({"background-position":"0px 0px"});Q.browser.msie?Q(".pattern").stop().animate({opacity:1},"fast"):Q(".pattern").css({opacity:1})},function(){Q.browser.msie?Q(".gradient").stop().animate({opacity:0.5}):Q(".gradient").css({"background-position":"0px -200px"});Q.browser.msie?Q(".pattern").stop().animate({opacity:0.2},"fast"):Q(".pattern").css({opacity:0.2})});Q(".nav-bar .main").hover(function(){Q.browser.msie?Q(".gradient").stop().animate({opacity:1}):Q(".gradient").css({"background-position":"0px 0px"});Q.browser.msie?Q(".pattern").stop().animate({opacity:1},"fast"):Q(".pattern").css({opacity:1})});Q(".nav-bar>li.has-flyout").unbind();Q(".nav-bar>li.has-flyout").each(function(am){var a=Q(this).children(".flyout").height();var al;!Q.browser.msie?al=Q(this).children(".flyout").css("padding"):al="20px 20px 20px 0";Q(this).children(".flyout").attr({"data-height":a});Q(this).children(".flyout").attr({"data-padding":al});if(a>n){n=a+20}});Q(".nav-bar>li.has-flyout").hover(function(){if(Q(window).width()<767){var e=Q(this).children(".flyout");var an=e.attr("data-height")+"px";var al=e.attr("data-padding");e.css({height:an,padding:al,opacity:1});e.slideDown(500)}else{if(Q(this).children(".flyout").css("display")=="none"){Q(this).children(".flyout").css({display:"block",opacity:0,height:Q(this).children(".flyout").attr("data-height"),padding:Q(this).children(".flyout").attr("data-padding")});Q(this).children(".flyout").stop().transition({opacity:1},500);setTimeout(function(){Q(this).children(".flyout").css({display:"block",opacity:1})},500);var am;if(Q.browser.msie&&parseInt(Q.browser.version,10)<9){am=20}else{am=0}var a=Q(this).children(".flyout").height()+am+20+"px";if(Q("#header").attr("data-fixed")!="true"){Q.browser.msie?Q("#header").stop().animate({"margin-bottom":a},"fast"):Q("#header").stop().css({"margin-bottom":a},300)}}}Q(this).children(".flyout-toggle").css({"background-position":"0px -13px"});Q(this).children(".main").css({"border-bottom":"2px solid rgba(255, 255, 255, 1)"})},function(){if(Q(window).width()<767){Q(this).children(".flyout").slideUp(500)}else{Q(this).children(".flyout").stop().transition({opacity:0},"fast",function(){Q(this).css({display:"none"})});Q.browser.msie?Q("#header").stop().animate({"margin-bottom":"0px"},"fast"):Q("#header").stop().css({"margin-bottom":"0px"},300);Q(this).css({height:"auto"})}Q(this).children(".flyout-toggle").css({"background-position":"0px 0px"});Q(this).children(".main").css({"border-bottom":"2px solid rgba(255, 255, 255, 0.4)"})});var C=false;function O(){if(Q(".nav-bar").attr("data-autohide")!="false"){Q.browser.msie?Q(".gradient").stop().animate({opacity:0.5}):Q(".gradient").css({"background-position":"0px -200px"});Q.browser.msie?Q(".pattern").stop().animate({opacity:0.2},"fast"):Q(".pattern").css({opacity:0.2});Q(".nav-bar>li.has-flyout").each(function(){Q(this).children(".flyout-toggle").css({"background-position":"0px 0px"});Q(this).children(".main").css({"border-bottom":"2px solid rgba(255, 255, 255, 0.4)"});if(Q(window).width()<767){Q(this).children(".flyout").slideUp(500)}else{Q("#header").stop().css({"margin-bottom":0});Q(this).children(".flyout").css({display:"none",height:0})}})}}function ah(){var al=1;var e=Q(".bg-gallery").attr("data-delay");var a;Q(".bg-gallery li").each(function(an){var ap=Q(this).attr("data-image");var am=(al*e)*0.5+"s";var ao=Q(this);if(an==0){a=ap}Q("<img/>").attr("src",ap).load(function(){var aq=ap;if(Q.browser.msie&&parseInt(Q.browser.version,10)<9){ao.children("span").remove();var ar="<img class='bg' src="+aq+" />";ao.append(ar);ao.children(".bg").css({"min-height":"100%","max-width":"none",position:"fixed",top:0,left:0,opacity:0})}else{ao.children("span").css({"background-image":"url("+aq+")"}).addClass("bg")}if(an==0){p()}if(an==Q(".bg-gallery li").length-1&&Q(".bg-gallery").children().length>1){setInterval(p,Q(".bg-gallery").attr("data-delay")*1000)}})})}k=1;function p(){if(Q("#bg").css("opacity")==1&&Q("#bg").attr("data-enabled")!="false"){Q(".bg-gallery li").children(".bg").css({display:"none"});Q(".bg-gallery li:last-child").children(".bg").css({display:"block"});Q(".bg-gallery li:first-child").children(".bg").css({opacity:0,display:"none"});Q(".bg-gallery li:first-child").remove().appendTo(".bg-gallery");Q(".bg-gallery li:last-child").children(".bg").css({opacity:0,display:"block"}).transition({opacity:1},(Q(".bg-gallery").attr("data-delay")*500,"out"));k+1<Q(".bg-gallery > li").size()?k++:k=0}}if(Q(".bg-gallery").length){ah()}if(Q.browser.msie&&parseInt(Q.browser.version,10)<9){Q(window).resize(function(){m()})}else{var N="onorientationchange" in window,l=N?"orientationchange":"resize";window.addEventListener(l,function(){m()},false)}function m(){L=Q("#header").height();var al=L;var a=window.innerHeight?window.innerHeight:Q(window).height();var am=a-al;if(Q(window).width()<767){Q(".flyout small").css({opacity:1});Q("#content, #content .wrapper, #content .wide").css({height:"auto"});Q("#content .target").css({"margin-top":0});if(Q("#content .works").length){Q("#content .works").css({overflow:"visible"})}if(Q(".portfolio").length){Q(".portfolio").parent().css({height:"inherit"})}if(Q(".nav-bar").hasClass("compact")){Q(".nav-bar").removeClass("compact")}if(Q(".map").length){Q(".map").css({height:"310px",position:"absolute"});Q(".subheader").transition({"margin-top":"200px"})}else{Q(".subheader").transition({"margin-top":0})}if(Q(".new .fullvideo").length){Q(".fullvideo").css({height:"auto","line-height":"normal"});v()}if(Q(".portfolio").length){Q(".portfolio").children("div").each(function(){Q(this).css({"line-height":"normal"})});Q(".project").css({height:"auto"})}Q(".target").css({height:"auto"});if(Q(".latest").length){Q(".latest li a .overlay").css({opacity:1})}q()}else{Q(".flyout small").css({opacity:0});Q("#musicPlayer").css({height:"6px"});if(Q("#main").attr("data-globalscroll")=="true"){Q("#content, #content .wrapper, #content .wide, #shell, #scroller").css({height:"auto"});Q("#content .target").css({"margin-top":0})}else{Q("#content .wrapper").css({height:am})}if(Q(".latest").length){Q(".latest li a .overlay").css({opacity:0})}if(ac){Q(".nav-bar").addClass("compact")}if(Q(".new .fullvideo").length){Q(".fullvideo").css({height:a-L,"line-height":a-L+"px"});v()}if(Q(".new .portfolio").length){Q(".portfolio").parent().css({height:a-L});Q(".project").css({height:"140px"})}if(Q(".new .map").length){if(Q("#main").attr("data-globalscroll")=="true"){var e=a-L-Q(".wide").height();if(e<300){e=300}Q(".map").css({position:"relative",height:e+"px"});Q(".subheader").transition({"margin-top":-e+"px"});Q(".subheader header").css({"padding-top":"20px"})}else{Q(".map").css({position:"fixed",height:a-L-Q(".wide").height()+"px"});Q(".subheader").transition({"margin-top":"20px"})}}if(!Q(".new .docked").length){Q(".target").css({height:a-L})}Y()}if(Q.browser.msie&&parseInt(Q.browser.version,10)<9){G()}}m();function G(){Q(".bg-gallery li").each(function(){var e=Q(this).children(".bg");var al=e.width()/e.height();var a=Q(window).width()/Q(window).height();if(a<al){e.css({width:"auto","max-width":"inherit"});e.css({height:"100%","max-width":"inherit"})}else{e.css({width:"100%","max-width":"inherit"});e.css({height:"auto","max-width":"inherit"})}})}function i(){var a=70;if(z){a=140}if(Q(".nav-bar").parent(this).height()>a&&Q(window).width()>767){Q(".nav-bar").addClass("compact");ac=true}else{if(Q(".nav-bar").hasClass("compact")){Q(".nav-bar").removeClass("compact")}ac=false}}!Q(".nav-bar").hasClass("compact")?i():ac=true;function Z(){Q(".new").css({overflow:"hidden"});Q("#musicPlayer").css({"margin-bottom":"0"});F();ag();if(Q("#shell").attr("data-height")){var e=Q("#shell").attr("data-height");Q("#shell").css({"max-height":e+"px"})}m();if(Q(".new .target .portfolio").length){c()}if(Q(".new .target .fullvideo").length){X()}if(Q(".new .contact").length){H()}if(Q(".new .contactForm").length){V()}if(Q(".new .target .works").length){T()}if(Q(".tweets").length){ak()}if(Q(".new .blog").length){x()}if(Q(".new .latest").length){r()}if(Q(".new .target .image")){f()}if(Modernizr.touch){Q(".works .item a, #content .image").bind("touchend",function(am){Q(".works .item a, #content .image").trigger("mouseleave");Q(this).trigger("mouseenter")})}b();Q("#content a[rel^='prettyPhoto']").live("click",function(am){am.preventDefault()});Q("#content a[rel^='prettyPhoto']").prettyPhoto({animationSpeed:"normal",opacity:0.8,showTitle:true,deeplinking:false});if(audioEnabled){audio.play();audioEnabled=false}var al=setInterval(a,200);function a(){clearInterval(al);m();y();if(Q(".new .target .vimeo").length){d()}if(Q(".new .target .youtube").length){K()}if(Q.browser.msie){Q("input[placeholder], textarea[placeholder]").placeholder()}}}function Y(){Q("#content .docked").each(function(){Q(this).children(".wide").css({height:"auto"});var a=Q(window).height()-L;if(Q(this).height()>a){var e=a-Q(this).children(".subheader").height()-30+"px";if(Q("#main").attr("data-globalscroll")!="true"){Q(this).children(".wide").css({height:e})}else{Q(this).children(".wide").css({height:"auto"})}}var al=a-Q(this).height()+"px";if(Q("#main").attr("data-globalscroll")!="true"){Q(this).css({"margin-top":al})}else{if(Q(this).height()<a){Q(this).css({"margin-top":al})}else{Q(this).css({"margin-top":0})}}});q()}function q(){if(Q(".portfolio").length){Q(".portfolio").children("div").each(function(){var am=window.innerWidth?window.innerWidth:Q(window).width();var a=window.innerHeight?window.innerHeight:Q(window).height();var e;var al;if(am<767){Q(this).parent().css({height:"inherit"});al="50%";e="inherit"}else{Q(this).parent().css({height:a-L+"px"});e=Q(this).parent().height()-Q(".project").height()+"px";al=((Q(this).parent().height()-Q(".project").height())*0.5)-16+"px"}Q(this).css({"line-height":e,backgroundPosition:"50% "+al})})}}function f(){Q("#content .image").each(function(){var a=Q(this).children("a").children("img");a.load(a.attr("src"),function(){a.transition({opacity:1},500);a.parent().css({backgroundImage:"none",backgroundColor:"#000000"});if(s!=null&&s!=undefined){s.refresh()}});Q(this).hover(function(){Q(this).children("a").children("img").stop().transition({opacity:0.5});if(Q.browser.msie){Q(this).children("a").children("span").animate({opacity:1})}else{Q(this).children("a").children("span").addClass("active")}},function(){Q(this).children("a").children("img").stop().transition({opacity:1});if(Q.browser.msie){Q(this).children("a").children("span").animate({opacity:0})}else{if(Q(this).children("a").children("span").hasClass("active")){Q(this).children("a").children("span").removeClass("active")}}})})}function X(){Q("#musicPlayer").css({"margin-bottom":"-6px"});Q.browser.msie?Q(".bg-gallery").stop().animate({opacity:0},"slow"):Q("#bg").css({opacity:0});if(Q.browser.msie){Q(".fullvideo .vimeo, .fullvideo .youtube").css({display:"table-row"})}Q("#content .close").click(function(){history.go(-1)})}function v(){if(Q(window).width()<767){Q(".fullvideo").css({width:"100%"})}else{var ap;Q(".fullvideo .youtube").length?ap=36:ap=10;var al=L;var e=window.innerHeight?window.innerHeight:Q(window).height();var ao=window.innerWidth?window.innerWidth:Q(window).width();var an=e-al;var am=ao/an;if(Q(".fullvideo").attr("data-fit")=="true"){if(am>16/9){Q(".fullvideo").css({width:(16*(an-ap))/9+"px"})}else{Q(".fullvideo").css({width:"100%"})}}else{var a;am>16/9?a=-(((ao*9)/16)-an)*0.5:a=0;Q(".fullvideo").css({width:"100%","margin-top":a});Q(".new").css({overflow:"visible"})}}}function b(){Q("dl.tabs").each(function(){var e=Q(this).children("dd").children("a");e.click(function(al){al.preventDefault();a(Q(this))})});function a(am){var al=am.closest("dl").find("a.active"),e=am.attr("href")+"Tab";al.removeClass("active");am.addClass("active");Q(e).closest(".tabs-content").children("li").hide();Q(e).css("display","block")}Q("#content .alert-box .close").click(function(al){al.preventDefault();Q(this).closest(".alert-box").fadeOut(function(e){Q(this).remove()})});Q('#content .new .target a:not([target]):not([href^="#"])').not(".heart").click(function(){E=true;var al=Q(this).attr("href")+" #content .target ";var e=Q(this).attr("href");var an=window.location.hash.substr(1);var am=location.pathname.substr(location.pathname.lastIndexOf("/")+1,location.pathname.length);if(e.substr(0,e.length-(w.length+1))!=an){if(an==""&&am==e){}else{af();ao()}}function ao(){if(!"onhashchange" in window||Q.browser.msie){if(Q.browser.msie){if(parseInt(Q.browser.version,10)<8&&e!="#"){Q("#content .new ").load(al,"",J)}}else{Q("#content .new ").load(al,"",J)}}var ap=Q("#header .bar").parent().width()+"px";Q("#header .bar").css({opacity:0.5,width:0}).stop().animate({width:ap},"500")}if(Q.browser.msie&&parseInt(Q.browser.version,10)<8){window.location="#"+(Q(this).attr("href").substr(0,Q(this).attr("href").length-(w.length+1))).replace(/^.*[\\\/]/,"")}else{window.location.hash=Q(this).attr("href").substr(0,Q(this).attr("href").length-(w.length+1))}return false})}Q("#musicPlayer").hover(function(){if(Q(window).width()<767){Q("#musicPlayer").css({height:"40px"})}else{Q.browser.msie?Q(this).stop().animate({height:"40px"},"fast"):Q(this).css({height:"40px"});if(Q(".project").length){Q.browser.msie?Q(".project").stop().animate({height:0}):Q(".project").css({height:0})}}},function(){if(Q(window).width()<767){Q("#musicPlayer").css({height:"6px"})}else{Q.browser.msie?Q(this).stop().animate({height:"6px"},"fast"):Q(this).css({height:"6px"});if(Q(".project").length){Q.browser.msie?Q(".project").stop().animate({height:"140px"}):Q(".project").css({height:"140px"})}}});function t(){if(Q(".project").length){Q(".project").hover(function(){if(Q(window).width()<767){Q(".project").css({height:"auto"})}else{if(Q.browser.msie&&parseInt(Q.browser.version,10)<9){Q(this).animate({height:Q(".project").height()+Q(".project p").height()+40+"px"},"fast")}else{Q.browser.msie?Q(this).animate({height:Q(".project").height()+Q(".project p").height()+40+"px","background-color":"rgba(0,0,0,0.8)"},"fast"):Q(this).css({height:Q(".project").height()+Q(".project p").height()+40+"px","background-color":"rgba(0,0,0,0.8)"})}}},function(){if(Q(window).width()<767){Q(".project").css({height:"auto"})}else{if(Q.browser.msie&&parseInt(Q.browser.version,10)<9){Q(this).animate({height:"140px"})}else{Q.browser.msie?Q(this).animate({height:"140px","background-color":"rgba(0,0,0,0.5)"}):Q(this).css({height:"140px","background-color":"rgba(0,0,0,0.5)"})}}})}}function M(){Q("#content").css({display:"block"});if(ab==""){if(Q(window).width()<767){setTimeout(scrollTo,0,0,1)}Q("#content .wrapper").children(".old").empty().css({height:0});var a=-Q(".home").width()+"px";Q(".home  h1, .home h2").children("span").css({"margin-left":a});Q("#content .home").css({height:"auto"});Q(".home").css({display:"none"});Q("#content h1, #content h2").delay(1000).each(function(e){var al=(e+1)*500;Q(".home").css({display:"block"});Q(this).delay(al).queue(function(){Q.browser.msie?Q(this).children("span").animate({"margin-left":"0px"},"slow",function(){m()}):Q(this).children("span").transition({"margin-left":"0px"},"slow")})})}else{Q("#content .old").css({height:0})}}M();function I(){if(Q("#header").attr("data-fixed")=="true"&&Q(window).width()>767){Q("#header").css({height:L+n+"px"})}else{Q("#header").css({height:"auto"})}}I();if(Modernizr.touch||Q(window).width()<767){Q(".nav-bar>li.has-flyout>a.main").css({"padding-right":"30px"});Q(".nav-bar>li.has-flyout>a.flyout-toggle").css({"border-left":"none"})}if(Q.browser.msie){if(parseInt(Q.browser.version,10)<9){Q("#musicPlayer, .opaque").css({background:"transparent","-ms-filter":"progid:DXImageTransform.Microsoft.gradient(startColorstr=#B2000000,endColorstr=#B2000000)",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#B2000000,endColorstr=#B2000000)",zoom:1})}if(parseInt(Q.browser.version,10)<10){Q("#header .social li").css({"padding-right":"2px"});Q(".gradient").css({"background-image":'url("images/gui/gradient.png")',"background-position":"0 0",opacity:0}).animate({opacity:"0.5"},"slow");Q("#header .nav-bar .flyout a").css({opacity:0.5,display:"inline-block"});Q("#header .nav-bar .flyout a").hover(function(){Q(this).stop().animate({opacity:1},"fast")},function(){Q(this).stop().animate({opacity:0.5},"fast")})}}function K(){Q(".new .target .youtube").each(function(al){var am;Q(this).attr("data-autoplay")=="true"?am=true:am=false;am?Q(this).attr({state:"playing"}):Q(this).attr({state:"paused"});Q(this).append("<div>");Q(this).children("div").attr({id:"youtube_"+al});Q(this).children("div").tubeplayer({width:600,height:450,allowFullScreen:"true",initialVideo:Q(this).attr("data-id"),preferredQuality:"default",autoPlay:am,onPlayerEnded:function(){if(audioEnabled){audio.play();audioEnabled=false}Q(this).attr({state:"paused"})},onPlayerPlaying:function(){if(audio.playing){audio.pause();audioEnabled=true}j();Q(this).attr({state:"playing"});ae("youtube",al)},onPlayerPaused:function(){Q(this).attr({state:"paused"});u("youtube",al)}})});function a(al){Q(".new .target .youtube").each(function(am){if(am!=al){Q(this).children("div").tubeplayer("pause")}})}function e(an){var am=Q(".new .target .youtube").length-1;var al=true;Q(".new .target .youtube").each(function(ao){var ap=Q(this).children("div").tubeplayer("data").state;if(ap!=2){al=false}if(ao==am&&al){if(audioEnabled){audio.play();audioEnabled=false}}})}}function d(){Q(".new .target .vimeo").each(function(am){var an=Q(this).attr("data-id");Q(this).append('<iframe class="vimeoPlayer" webkitAllowFullScreen mozallowfullscreen allowFullScreen/>');if(Q(this).attr("data-autoplay")=="true"){Q(this).children(".vimeoPlayer").attr("src","http://player.vimeo.com/video/"+an+"?api=1&title=0&amp;byline=0&amp;portrait=0&autoplay=true&player_id=vimeo_"+am);Q(this).children(".vimeoPlayer").attr("state","playing")}else{Q(this).children(".vimeoPlayer").attr("src","http://player.vimeo.com/video/"+an+"?api=1&title=0&amp;byline=0&amp;portrait=0&player_id=vimeo_"+am);Q(this).children(".vimeoPlayer").attr("state","paused")}if(Q.browser.msie&&parseInt(Q.browser.version,10)<8){Q(this).children(".vimeoPlayer").attr({frameBorder:0,marginHeight:0,marginWidth:0,border:0});Q(this).children(".vimeoPlayer").contentWindow.document.body.style.border="none"}else{Q(this).children(".vimeoPlayer").attr("frameborder","0")}Q(this).children(".vimeoPlayer").attr({id:"vimeo_"+am})});Q("iframe.vimeoPlayer").each(function(){Froogaloop(this).addEvent("ready",a)});function a(am){Froogaloop(am).addEvent("play",function ao(ap){j();if(audio.playing){audio.pause();audioEnabled=true}ae("vimeo",ap);Q("#"+ap).attr({state:"playing"})});Froogaloop(am).addEvent("pause",function an(ap){Q("#"+ap).attr({state:"paused"});u("vimeo",ap)})}function e(am){Q("iframe.vimeoPlayer").each(function(){var an=Q(this).attr("id");if(an!=am){Froogaloop(an).api("pause")}})}function al(ao){var an=Q("iframe.vimeoPlayer").length-1;var am=true;Q("iframe.vimeoPlayer").each(function(ap){if(Q(this).attr("state")!="paused"){am=false}if(ap==an&&am){if(audioEnabled){audio.play();audioEnabled=false}}})}}function j(){Q("#bg").attr({"data-enabled":"false"})}function ag(){Q("#bg").attr({"data-enabled":"true"})}function ae(a,e){switch(a){case"youtube":Q(".new .target .youtube").each(function(al){if(al!=e){Q(this).children("div").tubeplayer("pause")}});if(Q("iframe.vimeoPlayer").length){Q("iframe.vimeoPlayer").each(function(){if(Q(this).attr("state")!="paused"){Froogaloop(Q(this).attr("id")).api("pause")}})}break;case"vimeo":Q("iframe.vimeoPlayer").each(function(){var al=Q(this).attr("id");if(al!=e){Froogaloop(al).api("pause")}});if(Q(".new .target .youtube").length){Q(".new .target .youtube").each(function(){if(Q(this).children("div").tubeplayer("data").state!=2){Q(this).children("div").tubeplayer("pause")}})}break}}function u(a,am){if(al()&&e()){if(audioEnabled){audio.play();audioEnabled=false}ag()}else{if(audio.playing){audio.pause();audioEnabled=true}j()}function al(){var an=Q(".new .target .youtube").length-1;var ao=true;if(Q(".new .target .youtube").length){Q(".new .target .youtube").each(function(ap){var aq=Q(this).children("div").tubeplayer("data").state;if(aq!=2&&aq!=-1){ao=false}})}return ao}function e(){var an=Q("iframe.vimeoPlayer").length-1;var ao=true;if(Q("iframe.vimeoPlayer").length){Q("iframe.vimeoPlayer").each(function(ap){if(Q(this).attr("state")!="paused"){ao=false}})}return ao}}var aj=audiojs.createAll({trackEnded:function(){var a=Q("#musicPlayer ul li.playing").next();if(!a.length){a=Q("#musicPlayer ul li").first()}a.addClass("playing").siblings().removeClass("playing");audio.load(Q("p",a).attr("data-src"));audio.play()}});audio=aj[0];if(Q("#musicPlayer audio").length){first=Q("#musicPlayer ul p").attr("data-src");Q("#musicPlayer ul li").first().addClass("playing");audio.load(first)}});var audio;var audioEnabled=false;