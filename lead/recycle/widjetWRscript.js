!function(b,a,c){typeof module!="undefined"&&module.exports?module.exports=c():a[b]=c()}("reqwest",this,function(){function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||window.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,n){return function(){if(e._aborted){return n(e.request)}if(e._timedOut){return n(e.request,"Request is aborted: timeout")}e.request&&e.request[readyState]==4&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):n(e.request))}}function setHeaders(e,t){var n=t.headers||{},r;n.Accept=n.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var i=typeof FormData=="function"&&t.data instanceof FormData;!t.crossOrigin&&!n[requestedWith]&&(n[requestedWith]=defaultHeaders.requestedWith),!n[contentType]&&!i&&(n[contentType]=t.contentType||defaultHeaders.contentType);for(r in n){n.hasOwnProperty(r)&&"setRequestHeader" in e&&e.setRequestHeader(r,n[r])}}function setCredentials(e,t){typeof t.withCredentials!="undefined"&&typeof e.withCredentials!="undefined"&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,r){var i=uniqid++,s=e.jsonpCallback||"callback",o=e.jsonpCallbackName||reqwest.getcallbackPrefix(i),u=new RegExp("((^|\\?|&)"+s+")=([^&]+)"),a=r.match(u),f=doc.createElement("script"),l=0,c=navigator.userAgent.indexOf("MSIE 10.0")!==-1;return a?a[3]==="?"?r=r.replace(u,"$1="+o):o=a[3]:r=urlappend(r,s+"="+o),win[o]=generalCallback,f.type="text/javascript",f.src=r,f.async=!0,typeof f.onreadystatechange!="undefined"&&!c&&(f.htmlFor=f.id="_reqwest_"+i),f.onload=f.onreadystatechange=function(){if(f[readyState]&&f[readyState]!=="complete"&&f[readyState]!=="loaded"||l){return !1}f.onload=f.onreadystatechange=null,f.onclick&&f.onclick(),t(lastValue),lastValue=undefined,head.removeChild(f),l=1},head.appendChild(f),{abort:function(){f.onload=f.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=undefined,head.removeChild(f),l=1}}}function getRequest(e,t){var n=this.o,r=(n.method||"GET").toUpperCase(),i=typeof n=="string"?n:n.url,s=n.processData!==!1&&n.data&&typeof n.data!="string"?reqwest.toQueryString(n.data):n.data||null,o,u=!1;return(n.type=="jsonp"||r=="GET")&&s&&(i=urlappend(i,s),s=null),n.type=="jsonp"?handleJsonp(n,e,t,i):(o=n.xhr&&n.xhr(n)||xhr(n),o.open(r,i,n.async===!1?!1:!0),setHeaders(o,n),setCredentials(o,n),win[xDomainRequest]&&o instanceof win[xDomainRequest]?(o.onload=e,o.onerror=t,o.onprogress=function(){},u=!0):o.onreadystatechange=handleReadyState(this,e,t),n.before&&n.before(o),u?setTimeout(function(){o.send(s)},200):o.send(s),o)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){if(e.match("json")){return"json"}if(e.match("javascript")){return"js"}if(e.match("text")){return"html"}if(e.match("xml")){return"xml"}}function init(o,fn){function complete(e){o.timeout&&clearTimeout(self.timeout),self.timeout=null;while(self._completeHandlers.length>0){self._completeHandlers.shift()(e)}}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp=type!=="jsonp"?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r){switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}}self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);while(self._fulfillmentHandlers.length>0){resp=self._fulfillmentHandlers.shift()(resp)}complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,n){e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;while(self._errorHandlers.length>0){self._errorHandlers.shift()(e,t,n)}complete(e)}this.url=typeof o=="string"?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var n=e.name,r=e.tagName.toLowerCase(),i=function(e){e&&!e.disabled&&t(n,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))},s,o,u,a;if(e.disabled||!n){return}switch(r){case"input":/reset|button|image|file/i.test(e.type)||(s=/checkbox/i.test(e.type),o=/radio/i.test(e.type),u=e.value,(!s&&!o||e.checked)&&t(n,normalize(s&&u===""?"on":u)));break;case"textarea":t(n,normalize(e.value));break;case"select":if(e.type.toLowerCase()==="select-one"){i(e.selectedIndex>=0?e.options[e.selectedIndex]:null)}else{for(a=0;e.length&&a<e.length;a++){e.options[a].selected&&i(e.options[a])}}}}function eachFormElement(){var e=this,t,n,r=function(t,n){var r,i,s;for(r=0;r<n.length;r++){s=t[byTag](n[r]);for(i=0;i<s.length;i++){serial(s[i],e)}}};for(n=0;n<arguments.length;n++){t=arguments[n],/input|select|textarea/i.test(t.tagName)&&serial(t,e),r(t,["input","select","textarea"])}}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n},arguments),e}function buildParams(e,t,n,r){var i,s,o,u=/\[\]$/;if(isArray(t)){for(s=0;t&&s<t.length;s++){o=t[s],n||u.test(e)?r(e,o):buildParams(e+"["+(typeof o=="object"?s:"")+"]",o,n,r)}}else{if(t&&t.toString()==="[object Object]"){for(i in t){buildParams(e+"["+i+"]",t[i],n,r)}}else{r(e,t)}}}var win=window,doc=document,httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +(new Date),lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray=typeof Array.isArray=="function"?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=win[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials" in t){return t}if(win[xDomainRequest]){return new XDomainRequest}throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},"catch":function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,n){e.push({name:t,value:n})},arguments),e},reqwest.serialize=function(){if(arguments.length===0){return""}var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),e=="map"?t=serializeHash:e=="array"?t=reqwest.serializeArray:t=serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e,t){var n,r,i=t||!1,s=[],o=encodeURIComponent,u=function(e,t){t="function"==typeof t?t():t==null?"":t,s[s.length]=o(e)+"="+o(t)};if(isArray(e)){for(r=0;e&&r<e.length;r++){u(e[r].name,e[r].value)}}else{for(n in e){e.hasOwnProperty(n)&&buildParams(n,e[n],i,u)}}return s.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e){globalSetupOptions[t]=e[t]}},reqwest});function CallService(){var L="widget",ax=null,z=0,at=false,M=-1,aH=0,ad=null,al=null,N=null,X=null,f=0,t=[],r=null,aJ=null,aK=null,D=null,x=null,aO=null,ay="uptocall-btn-disabled",o="uptocall-office-open",V,T=0;var F,k,aC,ai,ak,az,av,aG,j,aM,ac,aj,O,aq,G,ap,B,J,aA,C,c,K,aB,ag,y,E,g,n,W,I,an;function a(aQ){if(!aQ||aQ.nodeName!=="FORM"){return}var aP,d,aR=[];for(aP=aQ.elements.length-1;aP>=0;aP=aP-1){if(aQ.elements[aP].name===""){continue}switch(aQ.elements[aP].nodeName){case"INPUT":switch(aQ.elements[aP].type){case"text":case"hidden":case"tel":case"email":case"password":case"button":case"reset":case"submit":aR.push(aQ.elements[aP].name+"="+encodeURIComponent(aQ.elements[aP].value));break;case"checkbox":case"radio":if(aQ.elements[aP].checked){aR.push(aQ.elements[aP].name+"="+encodeURIComponent(aQ.elements[aP].value))}break;case"file":break}break;case"TEXTAREA":aR.push(aQ.elements[aP].name+"="+encodeURIComponent(aQ.elements[aP].value));break;case"SELECT":switch(aQ.elements[aP].type){case"select-one":aR.push(aQ.elements[aP].name+"="+encodeURIComponent(aQ.elements[aP].value));break;case"select-multiple":for(d=aQ.elements[aP].options.length-1;d>=0;d=d-1){if(aQ.elements[aP].options[d].selected){aR.push(aQ.elements[aP].name+"="+encodeURIComponent(aQ.elements[aP].options[d].value))}}break}break;case"BUTTON":switch(aQ.elements[aP].type){case"reset":case"submit":case"button":aR.push(aQ.elements[aP].name+"="+encodeURIComponent(aQ.elements[aP].value));break}break}}return aR.join("&")}function aa(d){if(d){d.style.display="none"}}function aL(d){if(d){d.style.display="block"}}function ab(d){if(d){d.style.display="inline"}}function Z(d){if(d<=9){return"0"+d}return d}function ah(aS){var aR=":";var d=Math.floor(aS/6000);aS=aS-d*6000;var aQ=Math.floor(aS/100);var aP=aS-aQ*100;return Z(d)+aR+Z(aQ)+aR+Z(aP)}function i(){N--;if(N<0){clearInterval(al)}else{aC.innerHTML=ah(N)}}var P=function(aP){var d=document.createElement("a");d.href=aP;return d};function m(d){d=d.replace(/[^0-9]/g,"");if(d.length>=10&&d.length<=12){return true}else{return false}}function aD(aP,aQ){var d=new RegExp("(^|\\s)"+aQ+"(\\s|$)","g");if(d.test(aP.className)){return}aP.className=(aP.className+" "+aQ).replace(/\s+/g," ").replace(/(^ | $)/g,"")}function aI(aP,aQ){var d=new RegExp("(^|\\s)"+aQ+"(\\s|$)","g");aP.className=aP.className.replace(d,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"")}function aN(aP,d){return new RegExp("(\\s|^)"+d+"(\\s|$)").test(aP.className)}function au(aQ,aT,aR){aR=aR||{};var aW=aR.expires;if(typeof aW=="number"&&aW){var aV=new Date();aV.setTime(aV.getTime()+aW*1000);aW=aR.expires=aV}if(aW&&aW.toUTCString){aR.expires=aW.toUTCString()}aT=encodeURIComponent(aT);var aP=aQ+"="+aT;for(var aS in aR){aP+="; "+aS;var aU=aR[aS];if(aU!==true){aP+="="+aU}}document.cookie=aP+("; path=/")}function q(d,aQ){var aP=document.cookie.match(new RegExp("(?:^|; )"+d.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return aP?decodeURIComponent(aP[1]):aQ}function aw(aP){var aQ,d;aQ=function(aR){if(/&[^;]+;/.test(aR)){var aS=document.createElement("div");aS.innerHTML=aR;return !aS.firstChild?aR:aS.firstChild.nodeValue}return aR};if(typeof aP==="string"){return aQ(aP)}else{if(typeof aP==="object"){for(d in aP){if(typeof aP[d]==="string"){aP[d]=aQ(aP[d])}}}}return aP}var Q=function(aQ,aP,d){if(aQ==null||typeof(aQ)=="undefined"){return}if(aQ.addEventListener){aQ.addEventListener(aP,d,false)}else{if(aQ.attachEvent){aQ.attachEvent("on"+aP,d)}else{aQ["on"+aP]=d}}};function l(aP){if(t.length){console.log("send yametrika...");for(var d in t){if(typeof t[d].reachGoal=="function"){t[d].reachGoal(aP)}}}if(r){console.log("send googleAnalitics...");r.reachGoal(aP)}}function s(){f--;if(f<=0){H("on_view");au("call_view",f,{expires:-1});clearInterval(X)}else{au("call_view",f)}}function A(){reqwest({url:CallBaseUrl+"/"+L+"/close/?site="+CallSiteId+"&c="+T,type:"jsonp",contentType:"application/json",crossOrigin:true,withCredentials:true,jsonpCallback:"jsonCallback",success:function(d){if(d.status==0){console.log("close log complete")}}})}function w(d){var aP=q("call_ref");if(!aP){aP=""}reqwest({url:CallBaseUrl+"/"+L+"/open/?site="+CallSiteId+"&ref="+encodeURIComponent(aP)+"&type="+d+"&c="+T,type:"jsonp",contentType:"application/json",crossOrigin:true,withCredentials:true,jsonpCallback:"jsonCallback",success:function(aQ){if(aQ.status==0){console.log("open log complete")}}})}function p(d){k.value=k.getAttribute("data-"+d);j.innerHTML=j.getAttribute("data-"+d);aM.innerHTML=aM.getAttribute("data-"+d)}function H(aQ){if(ad.type!="mobile"){F.focus()}console.log("open...");if(!at){l("UPTC_SHOW");aa(E);if((aQ=="on_external")||(aQ=="on_close")){p("onclose")}else{p("default")}at=true;aL(c);for(var aP=0;aP<J.childNodes.length;aP++){if(J.childNodes[aP].id!="uptocallPopup"){aD(J.childNodes[aP],"uptocall-blur")}}if(ad.type=="panel"){var aR=-340,d=C.offsetWidth;Y({delay:10,duration:200,delta:function(aS){return Math.pow(aS,2)},step:function(aS){C.style.right=aR+d*aS+"px"}})}else{aL(C);C.style.top=Math.round(window.innerHeight/2)+"px"}au("call",M,{expires:31536000});au("call_count",aH,{expires:31536000});au("call_view_page",0,{expires:-1});au("call_view",0,{expires:-1});w(aQ);return false}return true}function S(){l("UPTC_CLOSE");aI(document.body,"modal-open");aL(E);for(var aP=0;aP<J.childNodes.length;aP++){if(aN(J.childNodes[aP],"uptocall-blur")){aI(J.childNodes[aP],"uptocall-blur")}}aa(c);if(ad.type=="panel"){var aQ=0,d=C.offsetWidth;Y({delay:10,duration:200,delta:function(aR){return Math.pow(aR,2)},step:function(aR){C.style.right=aQ-d*aR+"px"}})}else{aa(C)}A()}function am(){var d=F.value;if(ad.phone_mask===1){d=an.value+d}if(m(d)){if(!aN(B,"uptocall-form-submit")){if(I){if(parseInt(I.value)==0){aD(W,"uptocall-office-link-error");return false}}var aP=q("call_ref");if(!aP){aP=""}au("call_ref",0,{expires:-1});l("UPTC_CALL");aD(B,"uptocall-form-submit");console.log("submit...");reqwest({url:CallBaseUrl+"/"+L+"/submit/?site="+CallSiteId+"&"+a(B)+"&ref="+encodeURIComponent(aP)+"&timezone="+x+"&c="+T,type:"jsonp",contentType:"application/json",crossOrigin:true,withCredentials:true,jsonpCallback:"jsonCallback",success:function(aQ){if(aQ.status==1){aI(B,"uptocall-form-submit");B.style.opacity=1}else{if(!y||y.value=="0"){aI(B,"uptocall-form-submit");console.log("start timer wait...");if(ad.type!="mobile"){if(aC){N=ad.seconds*100;al=setInterval(i,10)}aa(n);aa(F);aa(an);aa(k);if(ak){aL(ak);aL(az);aa(av)}}else{b()}if(aQ.id){h();D=aQ.id;reqwest({url:CallBaseUrl+"/"+L+"/call/?site="+CallSiteId+"&id="+D+"&c="+T,type:"jsonp",contentType:"application/json",crossOrigin:true,withCredentials:true,jsonpCallback:"jsonCallback",success:function(aR){if(parseInt(aR.status)==1){console.log("Error: "+aR.message);if(ad.type=="panel"){aa(j);aa(aM);aa(B)}if(ad.type!="mobile"){if(aC){aD(ak,ay);aL(aj);clearInterval(al)}}h()}}})}else{if(j){j.innerHTML=aQ.header}if(aM){aM.innerHTML=aQ.text}}}else{if(aM){aM.innerHTML=aQ.text}}}}})}}else{aD(F,"uptocall-phone-error")}h();return false}function af(){if(document.getElementById("uptocall-email").value.trim()!=""){if(document.getElementById("uptocall-message").value.trim()!=""){l("UPTC_MSG");var d=document.getElementById("uptocall-form-email");d.style.opacity=0.5;console.log("submit email...");reqwest({url:CallBaseUrl+"/"+L+"/email/?site="+CallSiteId+"&"+a(d)+"&ref="+encodeURIComponent(U)+"&timezone="+x+"&c="+T,type:"jsonp",contentType:"application/json",crossOrigin:true,withCredentials:true,jsonpCallback:"jsonCallback",success:function(aR){d.style.opacity=1;if(aR.status==0){var aQ=document.getElementById("uptocall-header-email"),aP=document.getElementById("uptocall-text-email");aQ.innerHTML=aQ.getAttribute("data-complete");aP.innerHTML=aP.getAttribute("data-complete");aa(d);aE()}}})}else{aD(document.getElementById("uptocall-message"),"uptocall-phone-error")}}else{aD(document.getElementById("uptocall-email"),"uptocall-phone-error")}return false}function b(){if(!at){l("UPTC_SHOW");aL(c);console.log("show");w("mobile");F.focus()}else{l("UPTC_CLOSE");setTimeout(function(){aa(c)},500);console.log("hide");A()}at=!at;h()}function Y(d){var aQ=new Date;var aP=setInterval(function(){var aR=(new Date-aQ)/d.duration;if(aR>1){aR=1}d.step(aR);if(aR==1){clearInterval(aP)}},d.delay||10)}function e(){var aP=0,d=0;if(typeof(window.innerWidth)=="number"){aP=window.innerWidth;d=window.innerHeight}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){aP=document.documentElement.clientWidth;d=document.documentElement.clientHeight}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){aP=document.body.clientWidth;d=document.body.clientHeight}}}return{width:aP,height:d}}function v(){var aP=0,d=0;if(typeof(window.pageYOffset)=="number"){d=window.pageYOffset;aP=window.pageXOffset}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){d=document.body.scrollTop;aP=document.body.scrollLeft}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){d=document.documentElement.scrollTop;aP=document.documentElement.scrollLeft}}}return{x:aP,y:d}}function h(){var aV=1;if(ad.type=="mobile"){aV=window.innerWidth/480;var d=document.querySelector("meta[name=viewport]");if(d==null){var aR=e(),aQ=v(),aU=aR.height+aQ.y;if(at){aU-=c.clientHeight*aV}C.style.cssText="position:absolute;top:"+aU+"px;-webkit-transform-origin: 0 0;-moz-transform-origin: 0 0;-o-transform-origin: 0 0;-ms-transform-origin: 0 0;transform-origin: 0 0;-webkit-transition-property: bottom,top;-webkit-transition-duration: 0.1s;transition-duration:0.1s-moz-transform: scale("+aV+","+aV+");-ms-transform: scale("+aV+","+aV+");-webkit-transform: scale("+aV+","+aV+");-o-transform: scale("+aV+","+aV+");transform: scale("+aV+","+aV+");"}else{var aS=0;if(at){aS=c.clientHeight*aV}C.style.cssText="position:fixed;bottom:"+aS+"px;-webkit-transform-origin: 0 0;-moz-transform-origin: 0 0;-o-transform-origin: 0 0;-ms-transform-origin: 0 0;transform-origin: 0 0;-webkit-transition-property: bottom,top;-moz-transform: scale("+aV+","+aV+");-ms-transform: scale("+aV+","+aV+");-webkit-transform: scale("+aV+","+aV+");-o-transform: scale("+aV+","+aV+");transform: scale("+aV+","+aV+");"}}else{if(ad.type=="panel"){var aT=e(),aP=document.getElementById("uptocall-dialog");aP.style.height=aT.height+"px";aE()}}}function aE(){if(ad.type=="panel"){var d=0;if(ad.widget_email){d=-Math.round((aA.clientHeight-70)/2)}else{d=-Math.round((aA.clientHeight)/2)}aA.style.marginTop=d+"px"}}function ar(){if(typeof(ad.phone_mask)=="number"){F.onkeyup=function(d){if(d.keyCode<35||d.keyCode>39){this.value=this.value.replace(/[^0-9\+]/g,"")}aI(this,"uptocall-phone-error")}}else{F.value=ad.phone_mask;F.onkeyup=function(aP){if(aP.keyCode<35||aP.keyCode>39){var aQ=this.value.indexOf(ad.phone_mask,0);if(aQ==-1){this.value=ad.phone_mask}var d=this.value.substr(ad.phone_mask.length);d=d.replace(/[^0-9\+]/g,"");this.value=this.value.substr(0,ad.phone_mask.length)+d}aI(this,"uptocall-phone-error")}}}function u(){console.log("setup mobile...");J=document.body;J.insertAdjacentHTML("beforeend",ad.form);c=document.getElementById("uptocall-body");C=document.getElementById("uptocallPopup");F=document.getElementById("uptocall-phone");B=document.getElementById("uptocall-form");ap=document.getElementById("uptocall-start");K=document.getElementById("uptocall-select-date");aB=document.getElementById("uptocall-select-hour");ag=document.getElementById("uptocall-select-minute");an=document.getElementById("uptocall-phone-mask");Q(window,"resize",h);Q(document,"scroll",h);Q(document,"drag",h);Q(document,"pinch",h);Q(document,"rotate",h);Q(document,"orientationchange",h);h();ap.onclick=b;B.onsubmit=am;if(ad.ban_symbols){ar()}Q(K,"change",function(){var aP="";for(var d in ad.days[this.value].hours){if(typeof ad.days[this.value].hours[d]==="string"){aP+='<option value="'+d+'">'+ad.days[this.value].hours[d]+"</option>"}}aB.innerHTML=aP});Q(window,"load",function(){var d=document.getElementsByTagName("a");for(var aP=0;aP<d.length;aP++){if(d[aP].hash=="#uptocall"){console.log("setup open link");d[aP].onclick=function(){b();return false}}}})}function ae(){var d=v();if(d.y>500){E.style.display="block"}}function ao(){var aX=true,aW,a8,a3,aQ,a1;M=q("call");if(!M){M=new Date()}else{M=new Date(M)}aH=parseInt(q("call_count",0));var a7=new Date();if(aH>=ad.show_count){if((a7.getTime()-M.getTime())/3600000<=ad.show_time){aX=false}else{M=new Date()}}console.log("setup...");J=document.body;J.insertAdjacentHTML("beforeend",ad.form);c=document.getElementById("uptocall-backdrop");C=document.getElementById("uptocallPopup");ap=document.getElementById("uptocall-btn-exit");B=document.getElementById("uptocall-form");j=document.getElementById("uptocall-header");aM=document.getElementById("uptocall-text");F=document.getElementById("uptocall-phone");k=document.getElementById("uptocall-submit");ak=document.getElementById("uptocall-btn-success");az=document.getElementById("uptocall-btn-failed");av=document.getElementById("uptocall-added-container");aG=document.getElementById("uptocall-added");ac=document.getElementById("uptocall-added-back");aj=document.getElementById("uptocall-repeat-container");O=document.getElementById("uptocall-repeat-call");ai=document.getElementById("uptocall-countdown-container");aC=document.getElementById("uptocall-countdown");aq=document.getElementById("uptocall-rating-container");G=document.getElementById("uptocall-rating");K=document.getElementById("uptocall-select-date");aB=document.getElementById("uptocall-select-hour");ag=document.getElementById("uptocall-select-minute");y=document.getElementById("uptocall-delayed");E=document.getElementById("uptocall-mini");g=document.getElementById("uptocall-mini-main");n=document.getElementById("uptocall-office-text");W=document.getElementById("uptocall-office-link");I=document.getElementById("uptocall-office");an=document.getElementById("uptocall-phone-mask");ap.onclick=S;B.onsubmit=am;if(aC){aC.innerHTML=ah(ad.seconds*100)}Q(window,"resize",h);Q(window,"load",function(){var bb=document.getElementsByTagName("a");for(var bc=0;bc<bb.length;bc++){if(bb[bc].hash=="#uptocall"){console.log("setup open link");bb[bc].onclick=function(){at=false;H("link");return false}}}});if(ad.ban_symbols){ar()}if(ad.type=="panel"){var a9=document.getElementById("uptocall-status-call"),d=document.getElementById("uptocall-status-email"),aT=document.getElementById("uptocall-body-call"),aR=document.getElementById("uptocall-body-email"),aZ=document.getElementById("uptocall-dialog"),aY=document.getElementById("uptocall-form-email"),a2=e();aZ.style.height=a2.height+"px";aA=aT;if(a9){a9.onclick=function(){if(!aN(a9,"active")){aI(d,"active");aD(a9,"active");aa(aR);aL(aT);aA=aT;aE()}return false};d.onclick=function(){if(!aN(d,"active")){aI(a9,"active");aD(d,"active");aa(aT);aL(aR);aA=aR;aE()}return false};aY.onsubmit=af;document.getElementById("uptocall-email").onfocus=function(){aI(this,"uptocall-phone-error")};document.getElementById("uptocall-message").onfocus=function(){aI(this,"uptocall-phone-error")}}}if(ad.use_office){var ba=document.getElementById("uptocall-office-list");W.onclick=function(){if(!aN(this,o)){aD(this,o);aL(ba)}else{aI(this,o);aa(ba)}aI(W,"uptocall-office-link-error");return false};$office_links=ba.getElementsByTagName("a");for(a3=0;a3<$office_links.length;a3++){$office_links[a3].onclick=function(){I.value=this.rel;W.innerHTML="<span>"+this.innerHTML+"</span>";aI(W,o);aa(ba);return false}}}if(ak){ak.onclick=function(){if(!aN(this,ay)){aD(az,ay);clearInterval(al);aL(aq);if(ad.type=="panel"){aa(j);aa(aM);aa(B)}aE()}return false}}if(az){az.onclick=function(){if(!aN(this,ay)){aD(ak,ay);clearInterval(al);aL(aj);if(ad.type=="panel"){aa(j);aa(aM);aa(B)}aE()}return false}}if(O){O.onclick=function(){aL(n);if(ad.type=="panel"){aL(j);aL(aM);aL(B)}aa(aj);aI(ak,ay);aI(az,ay);if(aC){aC.innerHTML=ah(ad.seconds*100)}aE();am();return false}}if(aG){aG.onclick=function(){aa(ai);aL(K);aL(aB);aL(ag);aa(aG);ab(ac);y.value=1;p("waiting");aE();return false}}if(ac){ac.onclick=function(){aL(ai);aa(K);aa(aB);aa(ag);aa(ac);ab(aG);y.value=0;p("default");aE();return false}}Q(K,"change",function(){var bc="";for(var bb in ad.days[this.value].hours){if(typeof ad.days[this.value].hours[bb]==="string"){bc+='<option value="'+bb+'">'+ad.days[this.value].hours[bb]+"</option>"}}aB.innerHTML=bc});if(G){var aS=G.getElementsByTagName("a");for(a3=0;a3<aS.length;a3++){Q(aS[a3],"mouseover",function(){for(var bb=0;bb<aS.length;bb++){aI(aS[bb],"active")}for(bb=0;bb<this.rel;bb++){aD(aS[bb],"active")}});aS[a3].onclick=function(){reqwest({url:CallBaseUrl+"/"+L+"/rating/?site="+CallSiteId+"&call_id="+D+"&rating="+this.rel+"&c="+T,type:"jsonp",contentType:"application/json",crossOrigin:true,withCredentials:true,jsonpCallback:"jsonCallback",success:function(bb){if(bb.status==0){console.log("rating update complete");S()}}});return false}}}var a4=q("uptocall-mini-hide");if(E){if(ad.type=="panel"){if(ad.widget_email){var a6=document.getElementById("uptocall-mini-email"),aU=document.getElementById("uptocall-mini-phone"),a5;Q(E,"mouseenter",function(){if(!aN(E,"uptocall-mini-open")){clearInterval(a5);aD(E,"uptocall-mini-open");E.style.width="230px";E.style.height="225px";V=setTimeout(function(){aD(aU,"uptocall-mini-opacity");V=setTimeout(function(){aD(a6,"uptocall-mini-opacity")},300)},300)}});Q(E,"mouseleave",function(){a5=setTimeout(function(){aI(E,"uptocall-mini-open");clearInterval(V);E.style.width="90px";E.style.height="90px";aI(a6,"uptocall-mini-opacity");aI(aU,"uptocall-mini-opacity")},500)});a6.onclick=function(){at=false;H("mini_widget");aI(a9,"active");aD(d,"active");aa(aT);aL(aR);aA=aR;aE();return false};aU.onclick=function(){at=false;H("mini_widget");aI(d,"active");aD(a9,"active");aa(aR);aL(aT);aA=aT;aE();return false}}g.onclick=function(){at=false;H("mini_widget");if(ad.widget_email){aI(d,"active");aD(a9,"active");aa(aR);aL(aT)}aA=aT;aE();return false};c.onclick=function(){S();return false};if(a4){aa(E)}else{Q(document,"scroll",ae);Q(document,"drag",ae)}}else{if(a4){aa(E)}else{Q(document,"scroll",ae);Q(document,"drag",ae)}E.onclick=function(){a4=q("uptocall-mini-hide");if(!a4){if(aN(g,"uptocall-mini-close")){aa(E);au("uptocall-mini-hide",1,{expires:86400});return false}else{at=false;return H("mini_widget")}}};Q(E,"mouseover",function(){V=setTimeout(function(){aD(g,"uptocall-mini-close")},5000)});Q(E,"mouseout",function(){clearInterval(V);aI(g,"uptocall-mini-close")})}}if(ad.on_new){if(!ad.is_new_client){return false}}if(aX){aH++;if(ad.on_external){console.log("init on external");aW=window.location.hostname;a8=document.getElementsByTagName("a");for(a3=0;a3<a8.length;a3++){a1=P(a8[a3].href);if(a1.hostname!=aW){a8[a3].onclick=function(bb){return H("on_external")}}}aQ=document.getElementsByTagName("form");for(a3=0;a3<aQ.length;a3++){a1=P(aQ[a3].action);if(a1.hostname!=aW){aQ[a3].submit=function(){return H("on_external")}}}}if(ad.on_close){console.log("init on close");window.onmouseover=function(be){if(aJ===null){if(be.clientY>60){aJ=be.clientY;aK=new Date().getTime()}}else{var bb=new Date().getTime();var bc=bb-aK;var bf=aJ-be.clientY;var bd=Math.abs(Math.round(bf/bc*100));if(bf>0&&bd>66&&be.clientY<60){H("on_close")}aJ=be.clientY;aK=bb}}}if(ad.on_user_inactivity){console.log("init user inactivity "+ad.on_user_inactivity);function aP(){z--;if(z<0){clearInterval(ax);H("on_user_inactivity")}}function aV(){z=ad.on_user_inactivity}z=ad.on_user_inactivity;document.onmousemove=aV;ax=setInterval(aP,1000)}if(ad.on_view){f=q("call_view");if(!f){f=ad.on_view}console.log("init view "+f);X=setInterval(s,1000)}if(ad.on_view_page){var a0=q("call_view_page");if(!a0){a0=1}else{a0++}console.log("init page view "+ad.on_view_page+"/"+a0);if(a0>=ad.on_view_page){H("on_view_page")}else{au("call_view_page",a0,{expires:31536000})}}}else{console.log("not auto open")}}Q(window,"load",function(){for(var d in window){if(/yaCounter\d+/i.test(d)){t.push(window[d])}}if(window._gaq){r={reachGoal:function(aP){_gaq.push(["_trackEvent","button","click",aP])}}}else{if(window.GoogleAnalyticsObject&&typeof window[window.GoogleAnalyticsObject]==="function"){r={reachGoal:function(aP){((window[window.GoogleAnalyticsObject])("send","event","button","click",aP))}}}}});var R=new Date();x=-(R.getTimezoneOffset()/60);console.log("Timezone "+x);var U=document.referrer;var aF=P(U);if(aF.hostname!=location.hostname){au("call_ref",U,{expires:31536000})}else{U=""}if(document.cookie){T=1}au("uptocall",1);if(q("uptocall")){T=1}else{T=0}console.log("request form...");reqwest({url:CallBaseUrl+"/"+L+"/?site="+CallSiteId+"&timezone="+x+"&w="+screen.width+"&c="+T+"&ref="+encodeURIComponent(U),type:"jsonp",contentType:"application/json",crossOrigin:true,withCredentials:true,jsonpCallback:"jsonCallback",success:function(aR){if(aR.status==0){ad=aR;console.log("Now time "+aR.now_time);if(!document.getElementById("uptocallPopup")){if(aR.need_update){reqwest({url:"https://profileex.com/match/?p=get_user_ajax",type:"jsonp",contentType:"application/json",crossOrigin:true,withCredentials:true,success:function(aS){var aT="";if(aS.regions[0]){if(aS.regions[0].city){aT+=aS.regions[0].city}if(aS.regions[0].country){if(aT){aT+=", "}aT+=aS.regions[0].country}}if(aS.cookie_id){reqwest({url:CallBaseUrl+"/"+L+"/info/?c="+T,type:"jsonp",data:{cookie_id:aS.cookie_id,name:aS.firstname,email:aS.email,vk:aS.vk,phone:aS.phone,region:aT},contentType:"application/json",crossOrigin:true,withCredentials:true,jsonpCallback:"jsonCallback"})}}})}var aP="none",aQ=q("uptocall_session_hidden"),d=q("uptocall_session_visible");if(aQ){aP="hidden"}else{if(d){aP="visible"}}if(aP=="none"){switch(aR.session){case"hidden":au("uptocall_session_hidden",new Date());aP="hidden";break;case"visible":au("uptocall_session_visible",new Date());aP="visible";break;default:break}}if(aP=="none"||aP=="visible"){if(aR.type!="mobile"){ao()}else{u()}}}}else{console.log("Error: "+aR.message)}}})}if(!window.frameElement||window.location.host=="uptocall.com"){console.log("init...");CallService()}else{console.log("Error: not allow in frame")};